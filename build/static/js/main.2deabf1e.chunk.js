(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{10:function(e,t,n){},21:function(e,t,n){e.exports=n(44)},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),c=n.n(o),u=(n(10),n(20)),l=n(5),i=n.n(l),m=n(7),s=n(3),d=function(e){var t=e.filter,n=e.handleFilter;return r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",null,"filter shown with: "),r.a.createElement("input",{type:"text",value:t,onChange:n}))},f=function(e){var t=e.handleSubmit,n=e.newName,a=e.handleNewName,o=e.newNumber,c=e.handleNewNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("div",null,"name"),r.a.createElement("input",{type:"text",value:n,onChange:a})),r.a.createElement("div",null,r.a.createElement("div",null,"number"),r.a.createElement("input",{type:"tel",value:o,onChange:c})),r.a.createElement("button",{type:"submit"},"add"))},b=n(8),h={borderRadius:"5",padding:"8px",color:"green",border:"1px solid green",backgroundColor:"#d1e6cb"},p=Object(b.a)(Object(b.a)({},h),{},{color:"red",border:"1px solid red",backgroundColor:"#f0c4c4"}),v=function(e){var t=e.message;return t?r.a.createElement("div",{style:t.isErr?p:h},t.txt):null},E=n(2),w=n.n(E),g="/api/persons",j=function(){return w.a.get(g).then((function(e){return e.data}))},O=function(e){return w.a.post(g,e).then((function(e){return e.data}))},x=function(e,t){return w.a.put("".concat(g,"/").concat(e),t).then((function(e){return e.data}))},k=function(e){w.a.delete("".concat(g,"/").concat(e)).then((function(e){return console.log(e)}))},N=function(e){var t=e.persons,n=e.filter,a=e.handleDelete;return r.a.createElement("section",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,t.filter((function(e){return e.name.includes(n)})).map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a(e)}},"delete"))}))))},y=function(){var e=Object(a.useState)([{name:"Arto Hellas",number:"44",id:1},{name:"Arto Helfas",number:"45",id:2},{name:"ArtoHelfas",number:"45",id:3}]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),l=Object(s.a)(c,2),b=l[0],h=l[1],p=Object(a.useState)(""),E=Object(s.a)(p,2),w=E[0],g=E[1],y=Object(a.useState)(""),S=Object(s.a)(y,2),C=S[0],D=S[1],A=Object(a.useState)(null),H=Object(s.a)(A,2),T=H[0],B=H[1];Object(a.useEffect)((function(){Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:t=e.sent,o(t),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),B({txt:"Could not retrieve information from database",isErr:!0}),setTimeout((function(){B(null)}),5e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);var F=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={name:b,number:w},(r=n.find((function(e){return e.name===b})))?x(r.id,a).then((function(e){o(n.map((function(t){return t.id===e.id?e:t}))),B({txt:"".concat(e.name," updated."),isErr:!1}),setTimeout((function(){B(null)}),5e3)})).catch((function(e){console.log(e),B({txt:"".concat(r.name," does not exist in database"),isErr:!0}),setTimeout((function(){B(null)}),5e3),j().then((function(e){o(e)}))})):O(a).then((function(e){o([].concat(Object(u.a)(n),[e]))})),h(""),g("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){return function(t){e(t.target.value)}};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(d,{filter:C,handleFilter:J(D)}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(f,{newName:b,newNumber:w,handleNewName:J(h),handleNewNumber:J(g),handleSubmit:F}),r.a.createElement(v,{message:T}),r.a.createElement(N,{persons:n,filter:C,handleDelete:function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&(k(e.id),o(n.filter((function(t){return t.id!==e.id}))))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.2deabf1e.chunk.js.map